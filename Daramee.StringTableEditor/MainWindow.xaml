<Window x:Class="Daramee.StringTableEditor.MainWindow"
        x:Name="mainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Daramee.StringTableEditor"
        xmlns:conv="clr-namespace:Daramee.StringTableEditor.Converters"
        mc:Ignorable="d"
        Title="Untitled.json - String Table Editor" Height="540" Width="920" Closing="Window_Closing">
    <Window.Resources>
        <conv:NullCheckConverter x:Key="nullCheckConverter" />
        <conv:CultureInfoToFlagImageConverter x:Key="cultureInfoToFlagImageConverter" />
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="20" />
            <RowDefinition Height="28" />
            <RowDefinition />
        </Grid.RowDefinitions>

        <Menu>
            <MenuItem Header="_File">
                <MenuItem Header="_New..." Click="NewFile_Click" />
                <MenuItem Header="_Open..." Click="OpenFile_Click" />
                <Separator />
                <MenuItem Header="_Save..." Click="SaveFile_Click" />
                <MenuItem Header="Save _as..." Click="SaveAs_Click" />
                <Separator />
                <MenuItem Header="E_xit" Click="Exit_Click" />
            </MenuItem>
            <MenuItem Header="_Edit">
                <MenuItem Header="_Undo" Click="Undo_Click" IsEnabled="{Binding ElementName=mainWindow, Path=UndoManagerHasUndoStackItem}" />
                <MenuItem Header="_Redo" Click="Redo_Click" IsEnabled="{Binding ElementName=mainWindow, Path=UndoManagerHasRedoStackItem}" />
                <Separator />
                <MenuItem Header="F_ind" />
            </MenuItem>
            <MenuItem Header="_Strings">
                <MenuItem Header="_Add Language" Click="AddLanguage_Click" />
                <MenuItem Header="_Remove Language" Click="RemoveLanguage_Click" />
                <Separator />
                <MenuItem Header="A_dd String" Click="AddString_Click" />
                <MenuItem Header="R_emove String" Click="RemoveString_Click" />
                <Separator />
                <MenuItem Header="_Informations" Click="EditInfo_Click" />
            </MenuItem>
            <MenuItem Header="_Help">
                <MenuItem Header="_About..." />
            </MenuItem>
        </Menu>

        <ToolBarTray Grid.Row="1">
            <ToolBar ToolBarTray.IsLocked="True">
                <ToolBar.Resources>
                    <Style x:Key="{x:Static ToolBar.ButtonStyleKey}" TargetType="{x:Type Button}">
                        <Setter Property="Background" Value="Transparent" />
                        <Setter Property="Opacity" Value="1"/>
                        <Setter Property="IsEnabled" Value="True"/>
                        <Style.Triggers>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.25"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </ToolBar.Resources>

                <Button ToolTip="New..." Click="NewFile_Click">
                    <Path Data="M7,3.4139538L3.3829978,7.0309906 7,7.0309906z M9,2L9,9.0309887 2,9.0309887 2,30 22,30 22,2z M7.5860596,0L22,0C23.103027,0,24,0.89697266,24,2L24,30C24,31.102966,23.103027,32,22,32L2,32C0.89697266,32,0,31.102966,0,30L0,7.5859985z"
                          Stretch="Uniform" Fill="#FF000000" Width="14" Height="14" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5" />
                </Button>
                <Button ToolTip="Open..." Click="OpenFile_Click">
                    <Path Data="M2.6289987,8.3139955L4.3259975,25.153992 27.671004,25.153992 29.369003,8.3139955z M6.2369935,2.0379943L6.2369935,3.8779906 6.2629945,5.9379884 25.763,5.9379884 25.763,3.8779906 11.824001,3.8779906 11.824001,2.0379943z M4.1999981,0L13.866008,0 13.866008,1.8399962 27.800002,1.8399962 27.800002,5.9379884 31.999999,5.9379884 29.822005,27.529999 2.1780018,27.529999 0,5.9379884 4.2269985,5.9379884 4.201997,3.9029845z"
                          Stretch="Uniform" Fill="#FF000000" Width="14" Height="14" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5" />
                </Button>
                <Button ToolTip="Save..." Click="SaveFile_Click">
                    <Path Data="M5.3999969,24.699982L5.3999969,27.899994 26.199997,27.899994 26.199997,24.699982z M8.2999927,0L12.299995,0 12.299995,8.1000061 8.2999927,8.1000061z M0,0L5.2999908,0 5.2999908,9.7999878 26.199997,9.7999878 26.199997,0 31.700001,0 31.700001,32 0,32z"
                          Stretch="Uniform" Fill="#FF000000" Width="14" Height="14" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5" />
                </Button>

                <Separator />

                <Button ToolTip="Undo" Click="Undo_Click" IsEnabled="{Binding ElementName=mainWindow, Path=UndoManagerHasUndoStackItem}">
                    <Path Data="M18.137024,0C21.843018,0 25.321045,1.4430008 27.940002,4.0630035 30.559998,6.6860046 32,10.166 32,13.872002 32,15.199005 31.807007,16.495003 31.444031,17.737999L26.920044,17.737999C27.453003,16.534004 27.736023,15.228004 27.736023,13.872002 27.736023,11.305 26.740051,8.8950043 24.921997,7.0810013 23.110046,5.2669983 20.699036,4.2710037 18.138,4.2710037 15.570007,4.2710037 13.15802,5.2669983 11.350037,7.0810013 10.006042,8.4250031 9.1100464,10.100998 8.7369995,11.918999L13.334045,17.067001 0,17.067001 1.0640259,3.3280029 5.4650269,8.2509995C6.1410522,6.7109985 7.0980225,5.288002 8.3320313,4.0630035 10.949036,1.4430008 14.429016,0 18.137024,0z"
                          Stretch="Uniform" Fill="#FF000000" Width="14" Height="14" RenderTransformOrigin="0.5,0.5" />
                </Button>
                <Button ToolTip="Redo" Click="Redo_Click" IsEnabled="{Binding ElementName=mainWindow, Path=UndoManagerHasRedoStackItem}">
                    <Path Data="M5.0825796,17.736008L5.0860019,17.736008 5.0830035,17.737z M13.867998,0C17.572001,-9.9564801E-12 21.051996,1.4430084 23.671999,4.0630035 24.903,5.2890015 25.860001,6.7120056 26.540001,8.2490082L30.936996,3.3289948 32,17.067001 18.67,17.067001 23.267,11.917007C22.890001,10.100006 22.001001,8.423996 20.654001,7.0800018 18.840998,5.2680054 16.433001,4.2700043 13.866999,4.2700043 11.300998,4.2700043 8.8930006,5.2669983 7.0810041,7.0800018 5.2660022,8.8939972 4.2630038,11.304001 4.2630038,13.871002 4.2630038,15.139437 4.5152454,16.369207 4.9859581,17.510035L5.0825796,17.736008 0.56299973,17.736008C0.19400403,16.492996 0,15.197006 0,13.869003 0,10.162994 1.4440039,6.6849976 4.0639987,4.0630035 6.6779966,1.4430084 10.160998,-9.9564801E-12 13.867998,0z"
                          Stretch="Uniform" Fill="#FF000000" Width="14" Height="14" RenderTransformOrigin="0.5,0.5" />
                </Button>

                <Separator />

                <Button ToolTip="Add Language" Click="AddLanguage_Click">
                    <Path Data="M7.5239427,4.4000008C5.7329547,4.4010003 4.3949659,5.1760018 3.4339731,6.017997 2.7359786,6.6320031 2.270982,7.2750008 2.0619841,7.5959995L2.0619841,20.596998C3.2619753,19.530996,5.0979593,18.455999,7.5199411,18.455999L7.5239427,18.455999C9.9889195,18.455999,11.865908,19.566,13.088898,20.645002L13.088898,7.6070011C13.035897,7.5269992 12.964898,7.4270008 12.8789,7.3120029 12.631901,6.9869988 12.255904,6.543998 11.764907,6.108001 10.775916,5.2310021 9.3709242,4.4000008 7.5239427,4.4000008z M7.5239427,2.3390038C10.018922,2.339004 11.912908,3.4770045 13.134895,4.5680001 13.517895,4.9090035 13.841891,5.2480004 14.105888,5.5540001 14.360887,5.2499993 14.672885,4.9140008 15.043881,4.5760033 16.074875,3.6320033 17.610861,2.6590037 19.609846,2.4059975 19.222849,3.1230006 18.965851,3.8909984 18.833851,4.6770012 17.897858,4.9759972 17.132864,5.4820015 16.522869,6.017997 15.823877,6.6330025 15.35888,7.2760003 15.149883,7.5969989L15.149883,20.597997C16.350872,19.531996 18.187857,18.454 20.612837,18.455999 23.076819,18.455999 24.954806,19.565 26.177796,20.645002L26.177796,13.272002C26.873789,13.263999,27.567784,13.159003,28.239779,12.955001L28.239779,23.423002 26.316794,23.933996 26.315794,23.933996 26.314791,23.933996C26.289793,23.894003 26.268795,23.860998 26.239796,23.816 26.180794,23.727003 26.090794,23.593 25.966795,23.429998 25.719799,23.103002 25.344801,22.660002 24.853804,22.223997 23.86281,21.346998 22.459822,20.516996 20.612837,20.516996 18.820851,20.517996 17.482865,21.292997 16.522869,22.134001 15.581878,22.961996 15.06488,23.842001 15.025883,23.913L15.024884,23.913999 15.023884,23.917997C14.848882,24.236997 14.509884,24.454 14.120887,24.454 13.73789,24.454 13.404893,24.244001 13.226897,23.933996 13.201896,23.894003 13.180896,23.860998 13.151897,23.816 13.092896,23.727003 13.001896,23.593 12.8789,23.429998 12.631901,23.103002 12.255904,22.660002 11.764907,22.223997 10.775916,21.346998 9.3709242,20.516996 7.5239427,20.516996 5.7329547,20.517996 4.3949659,21.292997 3.4339731,22.134001 2.47998,22.972997 1.9619844,23.866003 1.9349841,23.917997L1.9309844,23.914999 0,23.423002 0,7.3059986 0.12599848,6.8130028C0.16299883,6.7489998 0.7499941,5.6770012 1.9549845,4.5760033 3.1529751,3.4800029 5.0279605,2.337997 7.5239427,2.3390038z M26.211796,1.7470015C25.631798,1.7470014,25.159802,2.2170026,25.159802,2.7990029L25.159802,4.8779976 23.000818,4.8779976C22.418822,4.8779976 21.947829,5.3489983 21.947829,5.9290001 21.947829,6.509002 22.418822,6.9800026 23.000818,6.9800026L25.159802,6.9800026 25.159802,9.0190036C25.159802,9.6009967 25.631798,10.069999 26.211796,10.069999 26.790789,10.069999 27.260786,9.6009967 27.260786,9.0190036L27.260786,6.9800026 29.222769,6.9800026C29.800764,6.9800026 30.270762,6.509002 30.270762,5.9290001 30.270762,5.3489983 29.800764,4.8779976 29.222769,4.8779976L27.260786,4.8779976 27.260786,2.7990029C27.260786,2.2170026,26.790789,1.7470014,26.211796,1.7470015z M26.091793,0C27.603783,-8.3652139E-08 29.115772,0.57600385 30.269762,1.7290038 32.576744,4.0380013 32.576744,7.7789981 30.269762,10.085997 27.962782,12.394004 24.22181,12.394004 21.913828,10.085997 19.605845,7.7789981 19.605845,4.0380013 21.913828,1.7290038 23.06782,0.57600385 24.579808,-8.3652139E-08 26.091793,0z"
                          Stretch="Uniform" Fill="#FF000000" Width="14" Height="14" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5" />
                </Button>

                <Separator />

                <Button ToolTip="Add String" Click="AddString_Click">
                    <Path Data="M4.6250053,19.688C5.1770054,19.688 5.6250053,20.136 5.6250053,20.688 5.6250053,21.24 5.1770054,21.688 4.6250053,21.688 4.0730053,21.688 3.6250053,21.24 3.6250056,20.688 3.6250053,20.136 4.0730053,19.688 4.6250053,19.688z M21,17L23,17 23,22 28,22 28,24 23,24 23,29 21,29 21,24 16,24 16,22 21,22z M22,15.688C17.967995,15.688 14.687991,18.968 14.687991,23 14.687991,27.033001 17.967995,30.313 22,30.313 26.032005,30.313 29.31201,27.033001 29.31201,23 29.31201,18.968 26.032005,15.688 22,15.688z M22,13.688C27.135006,13.688 31.313011,17.865999 31.313011,23 31.313011,28.135 27.135006,32.313 22,32.313 16.864994,32.313 12.686988,28.135 12.686988,23 12.686988,17.865999 16.864994,13.688 22,13.688z M4.6250053,11.688C5.1770054,11.688 5.6250053,12.136 5.6250053,12.688 5.6250053,13.24 5.1770054,13.688 4.6250053,13.688 4.0730053,13.688 3.6250053,13.24 3.6250056,12.688 3.6250053,12.136 4.0730053,11.688 4.6250053,11.688z M4.6250053,3.6559892C5.1770054,3.6559889 5.6250053,4.1039891 5.6250053,4.6559892 5.6250053,5.2079887 5.1770054,5.6559892 4.6250053,5.6559892 4.0730053,5.6559892 3.6250053,5.2079887 3.6250056,4.6559892 3.6250053,4.1039891 4.0730053,3.6559889 4.6250053,3.6559892z M2.0000001,2L2.0000001,8 23,8 23,2z M0.59399435,0L23.593994,0C24.145996,0,25,0.13500977,25,0.68798822L25,12.520996C24.354004,12.360992,23.687012,12.26001,23,12.222992L23,10 2.0000001,10 2.0000001,16 14.207009,16C13.68901,16.612,13.240009,17.282,12.867009,18L2.0000001,18 2.0000001,24 11.709992,24C11.777008,24.687988,11.912994,25.355988,12.104004,26L0.59399435,26C0.041992273,26,8.5917158E-08,25.23999,0,24.687012L0,0.68798822C8.5917158E-08,0.13500977,0.041992273,0,0.59399435,0z"
                          Stretch="Uniform" Fill="#FF000000" Width="14" Height="14" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5" />
                </Button>

                <Separator />

                <Button ToolTip="Edit Information" Click="EditInfo_Click">
                    <Path Data="M19.312936,27.48445L18.503138,29.66195 20.945698,29.11637z M9,26L15,26C15.553,26 16,26.447 16,27 16,27.552999 15.553,28 15,28L9,28C8.447,28 8,27.552999 8,27 8,26.447 8.447,26 9,26z M9,22L17,22C17.553,22 18,22.447 18,23 18,23.552999 17.553,24 17,24L9,24C8.447,24 8,23.552999 8,23 8,22.447 8.447,22 9,22z M24.539497,21.634649L20.391103,25.734797 22.789213,28.13167 26.978982,24.02963z M27.175086,19.029713L25.962367,20.228328 28.408292,22.630248 29.617089,21.446762z M27.174094,16.668033C27.453588,16.667155,27.732578,16.770657,27.945102,16.97867L31.967052,20.958744 32.00001,21.442764C32.002085,21.73577,31.884045,22.021787,31.677014,22.228793L23.060119,30.665971 22.755067,30.759998 17.325166,31.973008C17.245088,31.992022 17.164156,32.001024 17.085177,32.001024 16.769139,32.001024 16.464087,31.865005 16.252174,31.620004 15.987161,31.315003 15.911111,30.889976 16.054177,30.510969L17.988126,25.310865 18.171108,25.11686 26.400066,16.983675C26.614603,16.774167,26.894601,16.668909,27.174094,16.668033z M12.45406,12.842014C10.423059,12.842014,8.818059,14.14501,8.3910589,16.000005L16.51806,16.000005C16.09106,14.14501,14.486059,12.842014,12.45406,12.842014z M12.453999,6.5260096C11.375007,6.5260096 10.497014,7.4000101 10.497014,8.473011 10.497014,9.5470114 11.375007,10.422012 12.453999,10.422012 13.53299,10.422012 14.410983,9.5470114 14.410983,8.473011 14.410983,7.4000101 13.53299,6.5260096 12.453999,6.5260096z M12.453999,4.5260086C14.635981,4.5260086 16.410967,6.2970095 16.410967,8.473011 16.410967,9.6295428 15.910019,10.671773 15.113229,11.394742L15.092224,11.412909 15.154123,11.440389C17.228036,12.422746,18.62906,14.518166,18.62906,17.000002L18.62906,18 6.2800589,18 6.2800589,17.000002C6.2800589,14.518166,7.6810827,12.422746,9.7546244,11.440389L9.8160233,11.413126 9.7947674,11.394742C8.9979777,10.671773 8.4970293,9.6295428 8.4970293,8.473011 8.4970293,6.2970095 10.272016,4.5260086 12.453999,4.5260086z M0,0L24,0 24,18 22,18 22,2 2,2 2,30 14,30 14,32 0,32z"
                          Stretch="Uniform" Fill="#FF000000" Width="14" Height="14" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5" />
                </Button>

            </ToolBar>
        </ToolBarTray>

        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="240" />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>

            <GridSplitter Width="3" />

            <ListBox Name="listBoxCultureInfos" Margin="0,0,3,0" SelectionMode="Extended"
                     ScrollViewer.CanContentScroll="True"
                     SelectionChanged="listBoxCultureInfos_SelectionChanged" KeyUp="ListBox_KeyUp">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="24" />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition />
                            </Grid.RowDefinitions>

                            <Image Source="{Binding Converter={StaticResource cultureInfoToFlagImageConverter}}" Width="16" Height="11" Grid.RowSpan="2" VerticalAlignment="Center" />

                            <TextBlock Text="{Binding DisplayName}" Grid.Column="1" FontSize="18" />
                            <TextBlock Text="{Binding Name}" Grid.Column="1" Grid.Row="1" />
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>

            <DataGrid Name="dataGridTable" Grid.Column="2"
                      AutoGenerateColumns="False" CanUserResizeRows="False"
                      CanUserDeleteRows="False" CanUserAddRows="False"
                      VerticalGridLinesBrush="LightGray" HorizontalGridLinesBrush="LightGray"
                      IsEnabled="{Binding ElementName=dataGridTable, Path=ItemsSource, Converter={StaticResource nullCheckConverter}}"
                      ScrollViewer.VerticalScrollBarVisibility="Visible" ScrollViewer.HorizontalScrollBarVisibility="Auto"
                      CellEditEnding="DataGridTable_CellEditEnding" KeyUp="DataGrid_KeyUp">
                <DataGrid.Columns>
                    <DataGridTextColumn Binding="{Binding Key}" Header="Key" IsReadOnly="True" Width="*">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="FontFamily" Value="Consolas" />
                                <Setter Property="FontSize" Value="12" />
                                <Setter Property="Margin" Value="4" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Binding="{Binding Value}" Header="Value" Width="3*">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="FontSize" Value="12" />
                                <Setter Property="Margin" Value="4" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                        <DataGridTextColumn.EditingElementStyle>
                            <Style TargetType="TextBox">
                                <Setter Property="FontSize" Value="12" />
                                <Setter Property="Margin" Value="4" />
                                <Setter Property="Background" Value="Transparent" />
                                <Setter Property="BorderThickness" Value="0" />
                            </Style>
                        </DataGridTextColumn.EditingElementStyle>
                        <DataGridTextColumn.CellStyle>
                            <Style TargetType="{x:Type DataGridCell}">
                                <Setter Property="IsEditing" Value="True" />
                            </Style>
                        </DataGridTextColumn.CellStyle>
                    </DataGridTextColumn>
                </DataGrid.Columns>
                <DataGrid.ColumnHeaderStyle>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Opacity" Value="1" />
                        <Setter Property="FontSize" Value="14" />
                        <Style.Triggers>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.25"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.ColumnHeaderStyle>
                <DataGrid.RowStyle>
                    <Style TargetType="{x:Type DataGridRow}">
                        <Style.Resources>
                            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent" />
                            <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Transparent" />
                            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="Black" />
                            <SolidColorBrush x:Key="{x:Static SystemColors.ControlTextBrushKey}" Color="Black" />
                        </Style.Resources>
                    </Style>
                </DataGrid.RowStyle>
            </DataGrid>
        </Grid>
    </Grid>
</Window>
